<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="DiagrammeR, an R package that allows you to create flowcharts, diagrams, and graphs with Markdown-like text.">
        <meta name="keywords" content="R, JavaScript, graphviz, mermaid">
        <meta name="author" content="Richard Iannone and DiagrammeR contributors">

        <title>
        DiagrammeR - Documentation
        </title>

        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/docs.min.css" rel="stylesheet">

        <script src="js/ie-emulation-modes-warning.js"></script>

        <link rel="apple-touch-icon" href="/apple-touch-icon.png">
        <link rel="icon" href="/favicon.ico">
    </head>

<body>
    <a id="skippy" class="sr-only sr-only-focusable" href="#content"><div class="container"><span class="skiplink-text">Skip to main content</span></div></a>

    <!-- Docs master nav -->
    <header class="navbar navbar-static-top bs-docs-nav" id="top" role="banner">
        <div class="container">
            <div class="navbar-header">
                <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="index.html" class="navbar-brand">DiagrammeR</a>
            </div>
            <nav class="collapse navbar-collapse bs-navbar-collapse">
                <ul class="nav navbar-nav">
                    <li>
                      <a href="docs.html">Getting started</a>
                    </li>
                    <li>
                      <a href="io.html">I/O</a>
                    </li>
                    <li class="active">
                      <a href="graphviz.html">Graphviz</a>
                    </li>
                    <li>
                      <a href="mermaid.html">Mermaid</a>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="http://github.com/rich-iannone/DiagrammeR">GitHub</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Docs page layout -->
    <div class="bs-docs-header" id="content">
        <div class="container">
        <h1>DiagrammeR Docs</h1>
        <p>Get an overview of DiagrammeR, learn the syntax, check out some examples.</p>
        </div>
    </div>
    <div class="container bs-docs-container">
        <div class="row">
            <div class="col-md-9" role="main">
                <div class="bs-docs-section">
                    <h1 id="graphviz" class="page-header">Graphviz</h1>
                    <p class="lead"><strong>Graphviz</strong> support is an integral part of the <strong>DiagrammeR</strong> package. <strong>Graphviz</strong> consists of a graph description language called the <strong>DOT</strong> language and it also comprises various tools that can process the <strong>DOT</strong> language. <strong>DOT</strong> is highly customizable and it allows you to control line colors, arrow shapes, node shapes, and many other layout features.</p>
                    <h2 id="diagrammer-implementation">DiagrammeR Implementation</h2>
                    <p>For <strong>Graphviz</strong> graphs, <strong>DiagrammeR</strong> uses the processing function called <code>grViz</code>. What you pass into <code>grViz</code> is a valid graph specification in the <strong>DOT</strong> language. The <strong>DOT</strong> graph description can either be delivered to <code>grViz</code> in the form of a string, a reference to a <strong>Graphviz</strong> file (with a <code>.gv</code> file extension), or as a text connection.</p>
                    <p>All of the code examples provided in later sections call the <code>grViz</code> function in an <strong>R</strong> script and pass in a graph description as a string. It is important to consider that strings in <strong>R</strong> cannot contain any unescaped double-quote characters. However, the <code>grViz</code> function allows for single-quote characters in their place. As a further convenience, when the <strong>DOT</strong> graph description is supplied as a file (e.g., 'dot-graph.gv') or as a text connection, either format for quotes will be accepted.</p>
                    <p>In very recent builds of <strong>RStudio</strong>, the use of an external text file with the <code>.gv</code> file extension can provide the advantage of syntax coloring and previewing in the <strong>RStudio</strong> Viewer pane after saving (if 'Preview on Save' is selected), or, by pressing the 'Preview' button on the Source pane.</p>
                    <img src="img/rstudio-graphviz-syntax-coloring.png" class="img-responsive center-block">
                    <h2 id="defining-a-graphviz-graph">Defining a Graphviz Graph</h2>
                    <p>The <strong>Graphviz</strong> graph specification must begin with a directive stating whether a directed graph (<code>digraph</code>) or an undirected graph (<code>graph</code>) is desired. Semantically, this indicates whether or not there is a natural direction from one of the edge's nodes to the other. An optional graph ID follows this and paired curly braces denotes the body of the statement list (<code>stmt_list</code>).</p>
                    <p>Optionally, a graph may also be described as <code>strict</code>. This forbids the creation of multi-edges (i.e., there can be at most one edge with a given tail node and head node in the directed case). For undirected graphs, there can be at most one edge connected to the same two nodes. Subsequent <code>edge</code> statements using the same two nodes will identify the edge with the previously defined one and apply any attributes given in the <code>edge</code> statement.</p>
                    <p>Here is the basic structure:</p>
                    <div><pre><code class="prettyprint">[strict] (graph | digraph) [ID] '{' stmt_list '}'</code></pre></div>
                    <h2 id="statements">Statements</h2>
                    <p>The graph statement (<code>graph_stmt</code>), the node statement (<code>node_stmt</code>), and the edge statement (<code>edge_stmt</code>) are the three most commonly used statements in the <strong>Graphviz</strong> <strong>DOT</strong> language. Graph statements allow for attributes to be set for all components of the graph. Node statements define and provide attributes for graph nodes. Edge statements specify the edge operations between nodes and they supply attributes to the edges. For the edge operations, a directed graph must specify an edge using the edge operator <code>-&gt;</code> while an undirected graph must use the <code>--</code> operator.</p>
                    <p>Within these statements follow statement lists. Thus for a node statement, a list of nodes is expected. For an edge statement, a list of edge operations. Any of the list items can optionally have an attribute list (<code>attr_list</code>) which modify the attributes of either the node or edge.</p>
                    <p>Comments may be placed within the statement list. These can be marked using a <code>//</code> or a <code>/* */</code> structure. Comment lines are denoted by a <code>#</code> character. Multiple statements within a statement list can be separated by linebreaks or ; characters between multiple statements</p>
                    <p>Here is an example where nodes (in this case styled as boxes and circles) can be easily defined along with their connections:</p>
                    <div class="bs-example">
                        <img src="img/Example_7a.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">grViz("
digraph boxes_and_circles {

  # a 'graph' statement
  graph [overlap = true, fontsize = 10]

  # several 'node' statements
  node [shape = box,
        fontname = Helvetica]
  A; B; C; D; E; F

  node [shape = circle,
        fixedsize = true,
        width = 0.9] // sets as circles
  1; 2; 3; 4; 5; 6; 7; 8

  # several 'edge' statements
  A-&gt;1 B-&gt;2 B-&gt;3 B-&gt;4 C-&gt;A
  1-&gt;D E-&gt;A 2-&gt;4 1-&gt;5 1-&gt;F
  E-&gt;6 4-&gt;6 5-&gt;7 6-&gt;7 3-&gt;8
}
")</code></pre>
                        </div>
                    </div>
                    <h2 id="subgraphs-and-clusters">Subgraphs and Clusters</h2>
                    <p>Subgraphs play three roles in <strong>Graphviz</strong>. First, a subgraph can be used to represent graph structure, indicating that certain nodes and edges should be grouped together. This is the usual role for subgraphs and typically specifies semantic information about the graph components. It can also provide a convenient shorthand for edges. An edge statement allows a subgraph on both the left and right sides of the edge operator. When this occurs, an edge is created from every node on the left to every node on the right. For example, the specification</p>
                    <div><pre><code>A -&gt; {B C}</code></pre></div>
                    <p>is equivalent to</p>
                    <div><pre><code>A -&gt; B
A -> C</code></pre></div>
                    <p>In the second role, a subgraph can provide a context for setting attributes. For example, a subgraph could specify that blue is the default color for all nodes defined in it. In the context of graph drawing, a more interesting example is</p>
                    <div><pre><code>subgraph {
rank = same; A; B; C;
}</code></pre></div>
                    <p>This anonymous subgraph specifies that the nodes <code>A</code>, <code>B</code> and <code>C</code> should all be placed on the same rank.</p>
                    <p>The third role for subgraphs directly involves how the graph will be laid out by certain layout engines. If the name of the subgraph begins with <code>cluster</code>, <strong>Graphviz</strong> notes the subgraph as a special cluster subgraph. If supported, the layout engine will make it such that the nodes belonging to the cluster are drawn together, with the entire drawing of the cluster contained within a bounding rectangle.</p>
                </div>
                <div class="bs-docs-section">
                    <h1 id="attributes" class="page-header">Attributes</h1>
                    <p class="lead"><strong>Graphviz</strong> attributes allow you to style your <strong>Graphviz</strong> graph. Combinations of attributes for nodes, edges, clusters, and for the entire graph provide for highly-customized layouts.</p>
                    <p>All <strong>Graphviz</strong> attributes are specified by name-value pairs. Thus, to set the fillcolor of a node <code>abc</code>, one would use</p>
                    <div><pre><code>abc [fillcolor = red]</code></pre></div>
                    <p>Similarly, to set the arrowhead style of an edge <code>abc -> def</code>, one would use</p>
                    <div><pre><code>abc -> def [arrowhead = diamond]</code></pre></div>
                    <p>Quotation marks are important only for multiword attributes, such might be used in the <code>label</code> attribute.</p>
                    <h2 id="colors">Colors</h2>
                    <p>By default, <strong>Graphviz</strong> can use colors provided as hexadecimal values, or, as <strong>X11</strong> color names. The following provides the entire list of <strong>X11</strong> color names. Some colors have additional 4-color palettes based on the named color. Those additional colors can be used by appending the digits <code>1</code>-<code>4</code> to the color name. Gray (or grey) has variations from <code>0</code>-<code>100</code>. Please note that, in all color names, 'gray' is interchangeable with 'grey'.</p>
                    <div>
                        <img src="img/X11_Color_Names.png" class="img-responsive center-block">
                    </div>
                    <h2 id="node-shapes">Node Shapes</h2>
                    <p>There's no shortage of shapes available for nodes. Nodes can be changed from the default <code>ellipse</code> shape by using the <code>shape</code> parameter. This table provides a listing of all the possible node shapes.</p>
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Node Appearance</th>
                                    <th>Value for <code>shape</code></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="col-md-1"><img src="img/grviz-node-shape-oval.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>oval</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="img/grviz-node-shape-diamond.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>diamond</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="img/grviz-node-shape-egg.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>egg</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="img/grviz-node-shape-plaintext.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>plaintext</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="img/grviz-node-shape-point.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>point</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="img/grviz-node-shape-square.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>square</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="img/grviz-node-shape-triangle.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>triangle</code></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <h2 id="arrow-shapes">Arrow Shapes</h2>
                    <p>The shapes of arrows are highly customizable. When defining an edge, the <code>arrowhead</code> parameter allows you change the style of arrowhead from the default <code>normal</code> arrow shape, to one of several others. Here are some of the other arrowhead types that could be used.</p>
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Arrow Appearance</th>
                                    <th>Value for <code>arrowhead</code></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="col-md-1"><img src="img/grviz-arrowhead-normal.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>normal</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="img/grviz-arrowhead-box.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>box</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="img/grviz-arrowhead-crow.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>crow</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="img/grviz-arrowhead-curve.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>curve</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="img/grviz-arrowhead-diamond.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>diamond</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="img/grviz-arrowhead-dot.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>dot</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="img/grviz-arrowhead-inv.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>inv</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="img/grviz-arrowhead-none.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>none</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="img/grviz-arrowhead-tee.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>tee</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="img/grviz-arrowhead-vee.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>vee</code></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="bs-docs-section">
                    <h1 id="substitution" class="page-header">Substitution</h1>
                    <p class="lead">Inspired by <strong>Razor</strong> and the footnote style in <strong>Markdown</strong>, <strong>Graphviz</strong> substitution allows for mixing in <strong>R</strong> expressions into a <strong>Graphviz</strong> graph specification without sacrificing readability.</p>
                    <h2 id="how-it-works">How It Works</h2>
                    <p>To take advantage of substitution when rendering a graph, simply use the <code>grViz</code> function with <strong>Graphviz</strong> <strong>DOT</strong> code:</p>
                        <div>
                            <pre><code class="prettyprint">grViz("[...graph spec with substitutions using @@ notation and footnote R expressions...]")</code></pre>
                        </div>
                    <p>The notation <code>@@</code> within <strong>GraphViz</strong> <strong>DOT</strong> will indicate where the substitution is to take place and corresponding <strong>R</strong> expressions will provide values to be substituted. The <code>grViz</code> function will autodetect whether the working <strong>Graphviz</strong> graph specification contains <code>@@</code>s between the curly braces of the <code>[graph|digraph] {...}</code> DOT construction.</p>
                        <div>
                            <pre><code class="prettyprint">grViz("
[...graph spec with substitutions using @@ notation and footnote R expressions...]
")</code></pre>
                        </div>
                    <p>If you specify a subsitution with <code>@@</code>, you must ensure there is a valid expression for that substitution. The expressions are placed as footnotes and their evaluations must result in an <strong>R</strong> vector object (i.e., not a data frame, list, or matrix). Because there is the possibility to have multiple substitutions, numbering is required. Thus, the <code>@@</code> notation is immediately followed by a number and that number should correspond to the number of the footnoted <strong>R</strong> expression.</p>
                    <p>The substitution construction is:</p>
                        <div>
                            <pre><code>"@@" + [footnote number]</code></pre>
                        </div>
                    <p>Importantly, the footnote expressions should reside below the closing curly brace of the graph or digraph expression. It should always take the form of:</p>
                        <div>
                            <pre><code>"[" + [footnote number] + "]:"</code></pre>
                        </div>
                    <p>In the simple example of specifying a single node, the following substitution syntax would be used:</p>
                        <div>
                            <pre><code>digraph {
@@1
}

[1]: 'a'</code></pre>
                        </div>
                    <p>In the above example, the <code>[1]:</code> footnote expression evaluates as <code>'a'</code>, and, that is what's substituted in place of the <code>@@1</code> (where, in turn, it will be taken as the node ID).</p>
                    <p>Substitutions can also be used to insert values from vector indices into the graph specification. Simply use this format:</p>
                        <div>
                            <pre><code>"@@" + [footnote number] + "-" + [index number]</code></pre>
                        </div>
                    <p>Here's an example of how specific values from vectors can be inserted into the graph:</p>
                        <div>
                            <pre><code>digraph {
alpha
@@1-1; @@1-2; @@1-3; @@1-4; @@1-5
@@1-6; @@1-7; @@1-8; @@1-9; @@1-10
}

[1]: LETTERS</code></pre>
                    </div>
                    <p>After evaluation of the footnote expressions and substitution, the graph specification becomes this:</p>
                    <div>
                        <pre><code>digraph {
alpha
A; B; C; D; E
F; G; H; I; J
}</code></pre>
                    </div>
                    <h2 id="examples">Examples</h2>
                    <p>The best way to demonstrate how substitution works is through a set of examples. Here is an example of substituting alphabet letters from <strong>R</strong>'s <code>LETTERS</code> constant into a <strong>Graphviz</strong> graph specification.</p>
                    <p>You can mix subtitutions of single-values objects and those specifying indices of <strong>R</strong> vector objects. As an example:</p>
                    <div class="bs-example">
                        <img src="img/Graphviz_substitution.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">grViz("
digraph a_nice_graph {

# node definitions with substituted label text
node [fontname = Helvetica]
a [label = '@@1']
b [label = '@@2-1']
c [label = '@@2-2']
d [label = '@@2-3']
e [label = '@@2-4']
f [label = '@@2-5']
g [label = '@@2-6']
h [label = '@@2-7']
i [label = '@@2-8']
j [label = '@@2-9']

# edge definitions with the node IDs
a -> {b c d e f g h i j}
}

[1]: 'top'
[2]: 10:20
")</code></pre>
                        </div>
                    </div>
                    <p>As can be seen from the output:</p>
                    <ol>
                        <li>the node with ID <code>a</code> is given the label "top" (after substituting <code>@@1</code> with expression after the <code>[1]:</code> footnote expression)</li>
                        <li>the nodes with ID values from <code>b</code> to <code>j</code> are respectively provided values from indices 1 to 9 (using the hypenated form of <code>@@</code>) of the evaluated expression <code>10:20</code> (in the <code>[2]:</code> footnote expression)</li>
                    </ol>
                    <p>Footnote expressions are meant to be flexible. They can span multiple lines, and they can also take in objects that are available in the global workspace. So, as long as a vector object results from evaluation, substitution can be performed.</p>
                    <p>Here is a final example of a diagram created using <strong>R</strong> and <strong>RStudio</strong> information (obtained from the <code>R.Version</code> and <code>rstudioapi::versionInfo</code> functions). The output will of course vary by the system on which it was generated. Here is the output from the dev machine:</p>
                    <div class="bs-example">
                        <img src="img/r_Information.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">grViz("
digraph nicegraph {

  # graph, node, and edge definitions
  graph [compound = true, nodesep = .5, ranksep = .25,
         color = crimson]

  node [fontname = Helvetica, fontcolor = darkslategray,
        shape = rectangle, fixedsize = true, width = 1,
        color = darkslategray]

  edge [color = grey, arrowhead = none, arrowtail = none]

  # subgraph for R information
  subgraph cluster0 {
    node [fixedsize = true, width = 3]
    '@@1-1' -&gt; '@@1-2' -&gt; '@@1-3' -&gt; '@@1-4'
    '@@1-4' -&gt; '@@1-5' -&gt; '@@1-6' -&gt; '@@1-7'
  }

  # subgraph for RStudio information
  subgraph cluster1 {
    node [fixedsize = true, width = 3]
    '@@2' -&gt; '@@3'
  }

  Information             [width = 1.5]
  Information -&gt; R
  Information -&gt; RStudio
  R -&gt; '@@1-1'            [lhead = cluster0]
  RStudio -&gt; '@@2'        [lhead = cluster1]

}

[1]: paste0(names(R.Version())[1:7], ':\\n ', R.Version()[1:7])
[2]: paste0('RStudio version:\\n ', rstudioapi::versionInfo()[[1]])
[3]: paste0('Current program mode:\\n ', rstudioapi::versionInfo()[[2]])

")</code></pre>
                        </div>
                    </div>
                <div class="bs-docs-section">
                    <h1 id="rendering-engines" class="page-header">Rendering Engines</h1>
                    <p class="lead"><strong>Graphviz</strong> layouts can be modified radically by rendering the graph with different <strong>Graphviz</strong> engines. Let's learn all about those engines and what they can do.</p>
                    <h2 id="the-engines">The Engines</h2>
                    <p>By default, the <code>grViz</code> function renders graphs using the standard <strong>dot</strong> engine. However, the <strong>neato</strong>, <strong>twopi</strong>, and <strong>circo</strong> engines are selectable by doing either of the following:</p>
                        <ul>
                            <li>supplying those names to the engine argument of the grViz function</li>
                            <li>setting the graph attribute layout equal to either neato, twopi, or circo in a Graphviz graph statement</li>
                        </ul>
                    <div>
                        <img src="img/Graphviz_Engines.png" class="img-responsive center-block">
                    </div>
                    <h2 id="dot">dot</h2>
                    <p>By default, the <code>grViz</code> function renders graphs using the standard <strong>dot</strong> engine. However, the <strong>neato</strong>, <strong>twopi</strong>, and <strong>circo</strong> engines are selectable by supplying those names to the <code>engine</code> argument.</p>
                    <div><pre><code class="prettyprint">grViz("[...graph spec...]", engine = "[dot|neato|twopi|circo]")</code></pre></div>
                    <p>The <strong>dot</strong> engine flows the directed graph in the direction of rank (i.e., downstream nodes of the same rank are aligned). By default, the direction is from top to bottom (where the graph attribute <code>rankdir</code> is set to <code>TB</code>). The following examples will use the same <strong>Graphviz</strong> <strong>DOT</strong> code, differing only in the choice of engine. Here is the default <strong>dot</strong> output.</p>
                    <div class="bs-example">
                        <img src="img/engine-dot-TB.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">grViz("
digraph dot {

node [shape = circle,
      style = filled,
      color = grey,
      label = '']

node [fillcolor = red]
a

node [fillcolor = green]
b c d

node [fillcolor = orange]

edge [color = grey]
a -> {b c d}
b -> {e f g h i j}
c -> {k l m n o p}
d -> {q r s t u v}
}",
engine = "dot")</code></pre>
                        </div>
                    </div>
                    <p>Note that in the previous example, rank 1 is the red node whereas ranks 2 and 3 are colored green and yellow, respectively. Alternatively, the rank direction can be set to left to right in a <code>graph</code> statement (<code>rankdir = LR</code>).</p>
                    <div class="bs-example">
                        <img src="img/engine-dot-LR.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">grViz("
digraph dot {

graph [rankdir = LR]

node [shape = circle,
      style = filled,
      color = grey,
      label = '']

node [fillcolor = red]
a

node [fillcolor = green]
b c d

node [fillcolor = orange]

edge [color = grey]
a -> {b c d}
b -> {e f g h i j}
c -> {k l m n o p}
d -> {q r s t u v}
}",
engine = "dot")</code></pre>
                        </div>
                    </div>
                    <h2 id="neato">neato</h2>
                    <p>The <strong>neato</strong> engine provides spring model layouts. This is a suitable engine if the graph is not too large (less than 100 nodes) and you don't know anything else about it. The <strong>neato</strong> engine attempts to minimize a global energy function, which is equivalent to statistical multi-dimensional scaling. Have a look at the previous graph, rendered with the <strong>neato</strong> engine:</p>
                    <div class="bs-example">
                        <img src="img/engine-neato.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">grViz("
digraph neato {

node [shape = circle,
      style = filled,
      color = grey,
      label = '']

node [fillcolor = red]
a

node [fillcolor = green]
b c d

node [fillcolor = orange]

edge [color = grey]
a -> {b c d}
b -> {e f g h i j}
c -> {k l m n o p}
d -> {q r s t u v}
}",
engine = "neato")</code></pre>
                        </div>
                    </div>
                    <p>Things do actually get interesting if there are lots of nodes. Here is an example of an undirected graph with 407 nodes amongst several ranks. Graph edges have varying lengths. (The code is not presented here as it is rather lenghty but it is available as a <a href="https://gist.github.com/rich-iannone/de0bb88d155a2c1c7e38">GitHub gist</a>.)</p>
                    <div class="bs-example">
                        <img src="img/several-ranks-neato-overlap-true.png" class="img-responsive center-block">
                    </div>
                    <p>The graph specification can have an entirely different layout with <strong>neato</strong> engine if the graph attribute <code>overlap</code> is set to <code>false</code> instead of the default <code>true</code> value (<a href="https://gist.github.com/rich-iannone/c58b07f992a1f9ab5d3e">GitHub gist</a>). What occurs in this case is that node overlaps are removed by a Voronoi-based technique.</p>
                    <div class="bs-example">
                        <img src="img/several-ranks-neato-overlap-false.png" class="img-responsive center-block">
                    </div>
                    <h2 id="twopi">twopi</h2>
                    <p>The <strong>twopi</strong> engine provides radial layouts. Nodes are placed on concentric circles depending their distance from a given root node. In the following example, that root node is the red one.</p>
                    <div class="bs-example">
                        <img src="img/engine-twopi.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">grViz("
digraph twopi {

node [shape = circle,
      style = filled,
      color = grey,
      label = '']

node [fillcolor = red]
a

node [fillcolor = green]
b c d

node [fillcolor = orange]

edge [color = grey]
a -> {b c d}
b -> {e f g h i j}
c -> {k l m n o p}
d -> {q r s t u v}
}",
engine = "twopi")</code></pre>
                        </div>
                    </div>
                    <h2 id="circo">circo</h2>
                    <p>The <strong>circo</strong> engine provide circular layouts. This is suitable for certain diagrams of multiple cyclic structures, such as certain telecommunications networks.</p>
                    <div class="bs-example">
                        <img src="img/engine-circo.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">grViz("
digraph circo {

node [shape = circle,
      style = filled,
      color = grey,
      label = '']

node [fillcolor = red]
a

node [fillcolor = green]
b c d

node [fillcolor = orange]

edge [color = grey]
a -> {b c d}
b -> {e f g h i j}
c -> {k l m n o p}
d -> {q r s t u v}
}",
engine = "circo")</code></pre>
                        </div>
                    </div>
                </div>
                <div class="bs-docs-section">
                    <h1 id="functions-for-building-graphs" class="page-header">Functions for Building Graphs</h1>
                    <p class="lead">If you're planning on creating larger graph diagrams and also making use of external datasets, it can be better to use a set of <strong>DiagrammeR</strong> functions that work with data frames. Here is a basic schematic of the graph workflow, using functions to build toward a graph object from a group of data frames.</p>
                    <div>
                        <img src="img/Graph_Workflow.png" class="img-responsive center-block">
                    </div>
                    <h2 id="create-graph-render">Create Graph, Render</h2>
                    <p>With the <code>graphviz_graph</code> function, it's possible to generate a graph diagram object without interacting directly with <strong>DOT</strong> code. The function has the following options:</p>
<div>
<pre><code>graphviz_graph(
    nodes_df,     # provide the name of the data frame with node info         
    edges_df,     # provide the name of the data frame with edge info 
    graph_attrs,  # provide a vector of 'graph' attributes
    node_attrs,   # provide a vector of 'node' attributes as defaults
    edge_attrs,   # provide a vector of 'edge' attributes as defaults
    directed      # is the graph to be directed or undirected? Choose TRUE or FALSE
    )
</code></pre>
                    </div>
                    <p>The <code>graphviz_graph</code> function returns a <code>gv_graph</code> object, which can be used by additional processing functions. One such function is the <code>graphviz_render</code> function, which allows for both visualizing the graph object and creating output files:</p>
                    <div>
<pre><code>graphviz_render(
    graph,        # a 'gv_graph' object, created using the 'graphviz_graph' function
    output,       # a string specifying the output type; 'graph' (the default) renders
                  # the graph, 'DOT' outputs DOT code for the graph, and 'SVG' provides
                  # SVG code for the rendered graph
    width,        # optionally set a width in pixels
    height        # optionally set a height in pixels
    )
</code></pre>
                    </div>
                    <p>With packages such as <strong>magrittr</strong> or <strong>pipeR</strong>, one can conveniently pipe output from <code>graphviz_graph</code> to <code>graphviz_render</code>. On the topic of packages, it is important to load the <strong>V8</strong> package as it will enable color scaling functionality (as will be seen in later examples).</p>
                    <p>Before we get to using the <code>graphviz_graph</code> and <code>graphviz_render</code> functions, however, we'll need to create some specialized data frames. One is for nodes, the other concerns the edges. Both types of data frames are parsed by the <code>graphviz_graph</code> function and those column names that match attributes for either nodes (in the node data frame) or edges (in the edge data frame) will be used to provide attribute values on a per-node or per-edge basis. Columns with names that don't match are disregarded, so, there's no harm in having pre-existing or added columns with useful data for analysis.</p>
                    <p>Which columns might a node data frame have? Well, it's important to have at least one column named either <code>node</code>, <code>nodes</code>, or <code>node_id</code>. That's where unique values for the node ID should reside. Here are some notable node attributes:</p>
                        <ul>
                            <li><code>color</code> &mdash; provide an <strong>X11</strong> or hexadecimal color (append 2 digits to hex for alpha)</li>
                            <li><code>distortion</code> &mdash; the node distortion for any <code>shape = polygon</code></li>
                            <li><code>fillcolor</code> &mdash; provide an <strong>X11</strong> or hexadecimal color (append 2 digits to hex for alpha)</li>
                            <li><code>fixedsize</code> &mdash; <code>true</code> or <code>false</code></li>
                            <li><code>fontcolor</code> &mdash; provide an <strong>X11</strong> or hexadecimal color (append 2 digits to hex for alpha)</li>
                            <li><code>fontname</code> &mdash; the name of the font</li>
                            <li><code>fontsize</code> &mdash; the size of the font for the node label</li>
                            <li><code>height</code> &mdash; the height of the node</li>
                            <li><code>label</code> &mdash; the node label text that replaces the default text (which is the node ID)</li>
                            <li><code>penwidth</code> &mdash; the thickness of the stroke for the shape</li>
                            <li><code>peripheries</code> &mdash; the number of peripheries (essentially, additional shape outlines)</li>
                            <li><code>shape</code> &mdash; the node shape (e.g., <code>ellipse</code>, <code>polygon</code>, <code>circle</code>, etc.)</li>
                            <li><code>sides</code> &mdash; if <code>shape = polygon</code>, the number of sides can be provided here</li>
                            <li><code>style</code> &mdash; usually given the value filled if you'd like to fill a node with a color</li>
                            <li><code>tooltip</code> &mdash; provide text here for an unstyled browser tooltip</li>
                            <li><code>width</code> &mdash; the width of the node</li>
                            <li><code>x</code> &mdash; the x position of the node (requires graph attr <code>layout = neato</code> to use)</li>
                            <li><code>y</code> &mdash; the y position of the node (requires graph attr <code>layout = neato</code> to use)</li>
                        </ul>
                    <p>You don't need to use <code>data.frame</code> to make a node data frame: you can use the provided <code>create_nodes</code> function. It's similar in principle to the base <strong>R</strong> <code>data.frame</code> function except that it adds in the following conveniences for graph diagram work:</p>
                        <ul>
                            <li>single values are repeated for n number of nodes supplied</li>
                            <li>selective setting of attributes (e.g., giving attr values for 3 of 10 nodes, allowing non-set nodes to use defaults or globally set attr values)</li>
                            <li>supplying overlong vectors for attributes will result in trimming down to the number of nodes</li>
                            <li>setting <code>label = FALSE</code> will conveniently result in a non-labeled node</li>
                        </ul>
                    <h2 id="function-examples">Examples</h2>
                    <p>Here's an example of how to create a node data frame:</p>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">type_1_nodes &lt;-
  create_nodes(nodes = c("a", "b", "c", "d"),
               label = "type 1",
               style = "filled",
               color = "aqua",
               shape = c("circle", "circle",
                         "triangle", "triangle"))
</code></pre>
                        </div>
                    </div>
                    <p>The <code>type_1_nodes</code> object is indeed a data frame, and, this is good since it's familar and easy to work with. Note that singly supplied attribute values are repeated throughout:</p>
                    <div>
<pre><code> nodes  label  style color    shape
1    a type 1 filled  aqua   circle
2    b type 1 filled  aqua   circle
3    c type 1 filled  aqua triangle
4    d type 1 filled  aqua triangle
</code></pre>
                    </div>
                    <p>Let's make another node data frame:</p>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">type_2_nodes &lt;-
  create_nodes(nodes = c("e", "f", "g", "h"),
               label = "type 2",
               style = "filled",
               color = "lightblue",
               peripheries = c(2, 2))
</code></pre>
                        </div>
                    </div>
                    <p>Here is the resulting data frame (notice that values for the <code>peripheries</code> node attribute are only provided twice):</p>
                    <div>
<pre><code> nodes  label  style     color peripheries
1    e type 2 filled lightblue           2
2    f type 2 filled lightblue           2
3    g type 2 filled lightblue
4    h type 2 filled lightblue
</code></pre>
                    </div>                    
                    <p>Now that we have these groups of nodes in <code>type_1_nodes</code> and <code>type_2_nodes</code>, there may be occasion to combine them into a single node data frame. This can be done with the <code>combine_nodes</code> function (which works much like <code>rbind</code> except that it accepts data frames with columns differing in number, names, and ordering).</p>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">all_nodes &lt;- combine_nodes(type_1_nodes, type_2_nodes)</code></pre>
                        </div>
                    </div>
                    <p>This is the combined node data frame:</p>
                    <div>
<pre><code> nodes  label  style     color    shape peripheries
1    a type 1 filled      aqua   circle
2    b type 1 filled      aqua   circle
3    c type 1 filled      aqua triangle
4    d type 1 filled      aqua triangle
5    e type 2 filled lightblue                    2
6    f type 2 filled lightblue                    2
7    g type 2 filled lightblue
8    h type 2 filled lightblue
</code></pre>
                    </div>
                    <p>Let's look at the nodes that were created. Use the <code>graphviz_graph</code> (just provide the all_nodes object at this point) and pipe to <code>graphviz_render</code>. The <strong>pipeR</strong> package (used in these examples) provides a forward pipe with the <code>%>>%</code> operator. With <strong>magrittr</strong>, use <code>%>%</code> instead. So, this is what the diagram looks like at this point:</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-1-1.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">library("pipeR")

graphviz_graph(nodes_df = all_nodes) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <p>Want to extract a vector list of node IDs? You can use the get_nodes function. It can accept multiple node data frames, edge data frames, or graph objects.</p>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">get_nodes(all_nodes)</code></pre>
                        </div>
                    </div>
                    <div>
<pre><code>[1] "a" "b" "c" "d" "e" "f" "g" "h"</code></pre>
                    </div>
                    <p>Let's make some edges now. For the edge data frame, there are two columns that need to be present: one for the outgoing node edge, and, another for the incoming node edge. These can be called either edge_from, from, edge_to, or to. Each of the two columns should contain node IDs and, ideally, they should match those provided in the node data frame that will be supplied to the graphviz_graph function.</p>
                    <p>As in the nodes data frame, attributes can be provided. Here are some examples of edge attributes that can be used:</p>
                        <ul>
                            <li><code>arrowhead</code> &mdash; the arrow style at the head end (e.g, <code>normal</code>, <code>dot</code>)</li>
                            <li><code>arrowsize</code> &mdash; the scaling factor for the arrowhead and arrowtail</li>
                            <li><code>arrowtail</code> &mdash; the arrow style at the tail end (e.g, <code>normal</code>, <code>dot</code>)</li>
                            <li><code>color</code> &mdash; the stroke color; an <strong>X11</strong> color or a hex code (add 2 digits for alpha)</li>
                            <li><code>dir</code> &mdash; the direction; either <code>forward</code>, <code>back</code>, <code>both</code>, or <code>none</code></li>
                            <li><code>fontcolor</code> &mdash; choose an <strong>X11</strong> color or provide a hex code (append 2 digits for alpha)</li>
                            <li><code>fontname</code> &mdash; the name of the font</li>
                            <li><code>fontsize</code> &mdash; the size of the font for the node label</li>
                            <li><code>headport</code> &mdash; a cardinal direction for where the arrowhead meets the node</li>
                            <li><code>label</code> &mdash; label text for the line between nodes</li>
                            <li><code>minlen</code> &mdash; minimum rank distance between head and tail</li>
                            <li><code>penwidth</code> &mdash; the thickness of the stroke for the arrow</li>
                            <li><code>tailport</code> &mdash; a cardinal direction for where the tail is emitted from the node</li>
                            <li><code>tooltip</code> &mdash; provide text here for an edge tooltip</li>
                        </ul>
                    <p>Let's create some edges between nodes using the create_edges function:</p>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">type_1_edges &lt;-
  create_edges(edge_from = c("a", "a", "b", "c"),
               edge_to = c("b", "d", "d", "a"))

type_2_edges &lt;-
  create_edges(edge_from = c("e", "g", "h", "h"),
               edge_to = c("g", "h", "f", "e"),
               arrowhead = "dot",
               color = "red")</code></pre>
                        </div>
                    </div>                  
                    <p>Two edge data frames were just created. If you'd like to include all those edges in your graph, just use the combine_edges function:</p>
                    <div>
<pre><code>all_edges &lt;- combine_edges(type_1_edges, type_2_edges)</code></pre>
                    </div>
                    <p>Now we have node and edge data frames that can be combined. The next step is to incorporate those edges into the <code>graphviz_graph</code> function and then render the graph.</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-1-2.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">graphviz_graph(nodes_df = all_nodes,
               edges_df = all_edges) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <p>Not bad for an example graph. There may be cases where node or edge attributes should apply to all nodes and edges in the graph. In such cases, there's no need to create columns for those attributes where attribute values are repeated in all rows. Instead, supply vectors of attribute statements for the <code>node_attrs</code> or <code>edge_attrs</code> arguments in the <code>graphviz_graph</code> function. For example, you may want to use <code>Helvetica</code> as the label font. If so, use this in <code>graphviz_graph</code>:</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-1-3.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">graphviz_graph(nodes_df = all_nodes,
               edges_df = all_edges,
               node_attrs = "fontname = Helvetica") %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <p>Likewise, for edges, you may want a certain uniform look that is different from the defaults. Perhaps, a grey line which has a thicker line stroke.</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-1-4.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">graphviz_graph(nodes_df = all_nodes,
               edges_df = all_edges,
               node_attrs = "fontname = Helvetica",
               edge_attrs = c("color = gray", "penwidth = 4")) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <p>The graph attributes can be set in a similar manner by supplying a vector to the <code>graph_attrs</code> argument. In the next rendering, the layout engine is set to <code>circo</code>, node overlapping is suppressed, the separation between nodes is of factor <code>3</code>, and the edges are drawn first (so as to not obscure the nodes).</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-1-5.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">graphviz_graph(nodes_df = all_nodes,
               edges_df = all_edges,
               node_attrs = "fontname = Helvetica",
               edge_attrs = c("color = gray", "penwidth = 4"),
               graph_attrs = c("layout = circo",
                               "overlap = false",
                               "ranksep = 3",
                               "outputorder = edgesfirst")) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <h1 id="numeric-color-scales" class="page-header">Scaling Node and Edge Attributes</h1>
                    <p>With the <code>scale_nodes</code> and <code>scale_edges</code> functions, it's possible to create and apply scaled node and edge attributes. These attributes can be either of the numeric or color variety. Ideally, the numerical data from which the scaled values are generated should reside in the node or edge data frames. This is recommended because the values need to be of the same length and order as the records in the node or edge data frame.</p>
                    <p>For nodes, scales can be made for the following attributes:</p>
                        <ul>
                            <li><code>fontsize</code> <em>numeric</em></em></li>
                            <li><code>labelfontsize</code> <em>numeric</em></li>
                            <li><code>penwidth</code> <em>numeric</em></li>
                            <li><code>height</code> <em>numeric</em></li>
                            <li><code>weight</code> <em>numeric</em></li>
                            <li><code>x</code> <em>numeric</em></li>
                            <li><code>y</code> <em>numeric</em></li>
                            <li><code>color</code> <em>color</em></li>
                            <li><code>fillcolor</code> <em>color</em></li>
                            <li><code>fontcolor</code> <em>color</em></li>
                        </ul>
                    <p>For edges, scales can be made for the following edge attributes:</p>
                        <ul>
                            <li><code>fontsize</code> <em>numeric</em></li>
                            <li><code>labelfontsize</code> <em>numeric</em></li>
                            <li><code>labelangle</code> <em>numeric</em></li>
                            <li><code>labeldistance</code> <em>numeric</em></li>
                            <li><code>penwidth</code> <em>numeric</em></li>
                            <li><code>arrowsize</code> <em>numeric</em></li>
                            <li><code>minlen</code> <em>numeric</em></li>
                            <li><code>weight</code> <em>numeric</em></li>
                            <li><code>color</code> <em>color</em></li>
                            <li><code>fontcolor</code> <em>color</em></li>
                            <li><code>labelfontcolor</code> <em>color</em></li>
                        </ul>
                    <p>There is also another attribute for both nodes and edges called <code>alpha</code> which is a numeric value from <code>0</code>-<code>100</code> that modifies the opacity of a specified color attribute. A value of <code>0</code> is essentially invisible (i.e., completely transparent) whereas <code>100</code> is entirely opaque (i.e., no transparency applied). Creating an alpha scale can be done by either referencing a column containing color attribute values, or, by initializing a color attribute column and then creating an alpha scale at the same time. An example will be useful here, alongside <strong>RStudio</strong> <strong>Viewer</strong> output. Begin by randomly creating edges and nodes with static attributes:</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-2-1.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint"># Set a seed to make the example reproducible
set.seed(23)

# Create an edge data frame and also include a column of 'random' data
many_edges &lt;-
  create_edges(edge_from = sample(seq(1:100), 100, replace = TRUE),
               edge_to = sample(seq(1:100), 100, replace = TRUE),
               random_data = sample(seq(1:5000), 100, replace = TRUE))

# Create the node data frame, using the nodes that are available in
# the 'many_edges' data frame; provide 'shape' and 'fillcolor' attributes
many_nodes &lt;-
  create_nodes(node = get_nodes(many_edges),
               random_data = sample(seq(1:5000),
                                    length(get_nodes(many_edges))),
               label = FALSE,
               shape = "circle",
               fillcolor = "red")

# View the graph and also ensure that style = filled is present
# to activate the fillcolor node attribute
graphviz_graph(nodes_df = many_nodes, edges_df = many_edges,
               node_attrs = "style = filled",
               graph_attrs = c("layout = twopi", 
                               "overlap = false")) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <p>Create a scale for the node attribute <code>penwidth</code> (which changes the stroke thickness of the node shape). Using the data in <code>random_data</code>, those values will be scaled linearly from <code>2</code> to <code>10</code>.</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-2-2.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">many_nodes &lt;- scale_nodes(nodes_df = many_nodes,
                             to_scale = many_nodes$random_data,
                             node_attr = "penwidth",
                             range = c(2, 10))

graphviz_graph(nodes_df = many_nodes, edges_df = many_edges,
               node_attrs = "style = filled",
               graph_attrs = c("layout = twopi", 
                               "overlap = false")) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <p>To apply transparency to color values, use the <code>alpha</code> node attribute but reference the <code>color</code> attribute that should be modified with the syntax: 'alpha:[color_attr]'. If the referenced color attribute doesn't exist, use the following syntax: 'alpha:[color_attr]=[color]'. The color value can either be an <strong>X11</strong> color name or a hexadecimal color value.</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-2-3.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">many_nodes &lt;- scale_nodes(nodes_df = many_nodes,
                          to_scale = many_nodes$random_data,
                          node_attr = "alpha:fillcolor",
                          range = c(5, 90))

graphviz_graph(nodes_df = many_nodes, edges_df = many_edges,
               node_attrs = "style = filled",
               graph_attrs = c("layout = twopi", 
                               "overlap = false")) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <p>Edges can have scales applied to edge attributes:</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-2-4.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">many_edges &lt;- scale_edges(edges_df = many_edges,
                             to_scale = many_edges$random_data,
                             edge_attr = "penwidth",
                             range = c(0.5, 10))

graphviz_graph(nodes_df = many_nodes, edges_df = many_edges,
               node_attrs = "style = filled",
               graph_attrs = c("layout = twopi", 
                               "overlap = false")) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <p>You can linearly scale color values as well. When creating color scales, ensure that the <strong>V8</strong> library is installed and loaded.</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-2-5.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint"># install.packages("V8")
library("V8")
                    
many_edges &lt;- scale_edges(edges_df = many_edges,
                             to_scale = many_edges$penwidth,
                             edge_attr = "color",
                             range = c("red", "green"))

graphviz_graph(nodes_df = many_nodes, edges_df = many_edges,
               node_attrs = "style = filled",
               graph_attrs = c("layout = twopi", 
                               "overlap = false")) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <h1 id="exporting-graph-code" class="page-header">Exporting Graph Code</h1>
                    <p>If you'd like to return the <strong>Graphviz</strong> <strong>DOT</strong> code (to, perhaps, share it or use it directly with the <strong>Graphviz</strong> command-line utility), just use <code>output = "DOT"</code> in the <code>graphviz_render</code> function. Here's a simple example:</p>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">graphviz_graph(nodes_df = data.frame(nodes = c("a", "b", "c")),
               edges_df = data.frame(edge_from = c("a", "b", "c"),
               edge_to = c("b", "c", "b")),
               graph_attrs = c("layout = dot", "rankdir = LR"),
               node_attrs = "fontname = Helvetica",
               edge_attrs = "arrowhead = dot") %>>%
                 graphviz_render(output = "DOT") %>>% cat</code></pre>
                        </div>
                    </div>
                    <p>The output is pretty clean DOT code:</p>
<div>
<pre><code>digraph {

  graph [layout = dot,
         rankdir = LR]

  node [fontname = Helvetica]

  edge [arrowhead = dot]

  'a'
  'b'
  'c'
  'a'->'b' 
  'b'->'c' 
  'c'->'b' 
}</code></pre>
</div>
                    <p>What about SVGs? Those are the things you should eat for breakfast, every day. Well, you can get those out as well. It's all part of maintaining a balanced diet:</p>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint"># install.packages("V8")
library("V8")

graphviz_graph(nodes_df = data.frame(nodes = c("a", "b", "c")),
               edges_df = data.frame(edge_from = c("a", "b", "c"),
                                     edge_to = c("b", "c", "b")),
               graph_attrs = c("layout = dot", "rankdir = LR"),
               node_attrs = "fontname = Helvetica",
               edge_attrs = "arrowhead = dot") %>>%
               graphviz_render(output = "SVG") %>>% cat</code></pre>
                        </div>
                    </div>
                    <h1 id="nycflights13-example" class="page-header">Example with nycflights13</h1>
                    <p>Now, yet another example. This time with an external dataset. Let's use the <strong>nycflights13</strong> package to prepare some data frames and then create a graph diagram.</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-3-1.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint"># Get the 'nycflights13' package if not already installed
# install.packages('nycflights13')

# Get the 'lubridate' package if not already installed
# install.packages('lubridate')

# Get the latest build of the 'DiagrammeR' package from GitHub
devtools::install_github('rich-iannone/DiagrammeR')

library("nycflights13")
library("lubridate")
library("DiagrammeR")

# Choose a day from 2013 for NYC flight data
# (You can choose any Julian day, it's interesting to see results for different days)
day_of_year &lt;- 10 

# Get a data frame of complete cases (e.g., flights have departure and arrival times)
nycflights13 &lt;-
  nycflights13::flights[which(complete.cases(nycflights13::flights) == TRUE), ]

# Generate a POSIXct vector of dates using the 'ISOdatetime' function
# Columns 1, 2, and 3 are year, month, and day columns
# Column 4 is a 4-digit combination of hours (00-23) and minutes (00-59)
date_time &lt;-
  data.frame("date_time" =
               ISOdatetime(year = nycflights13[,1],
                           month = nycflights13[,2],
                           day = nycflights13[,3],
                           hour = gsub("[0-9][0-9]$", "", nycflights13[,4]),
                           min = gsub(".*([0-9][0-9])$", "\\1", nycflights13[,4]),
                           sec = 0, tz = "GMT"))

# Add the POSIXct vector 'date_time' to the 'nycflights13' data frame
nycflights13 &lt;- cbind(date_time, nycflights13)

# Select flights only from the specified day of the year 2013
nycflights13_day &lt;-
  subset(nycflights13,
         date_time >= ymd('2013-01-01', tz = "GMT") + days(day_of_year - 1) &
           date_time &lt; ymd('2013-01-01', tz = "GMT") + days(day_of_year))

# Create the 'nodes' data frame where at least one column is named "nodes" or "node_id"
# Column 12 is the 3-letter code for the airport departing from
# Column 13 is for the airport arriving to
# (Option: change df to 'nycflights13_day' and only airports used for the day will be included)
nodes_df &lt;- create_nodes(nodes = unique(c(nycflights13[,12],
                                    nycflights13[,13])),
                         label = FALSE)

# The 'edges' data frame must have columns named 'edge_from' and 'edge_to'
# The color attribute is determined with an 'ifelse' statement, where
# column 8 is the minutes early (negative values) or minutes late (positive values)
# for the flight arrival
edges_df &lt;- create_edges(edge_from = nycflights13_day[,12],
                         edge_to = nycflights13_day[,13],
                         color = ifelse(nycflights13_day[,8] &lt; 0,
                                    "green", "red"))

# Set the graph diagram's default attributes for...

# ...nodes
node_attrs &lt;- c("style = filled", "fillcolor = lightblue",
                "color = gray", "shape = circle", "fontname = Helvetica",
                "width = 1")

# ...edges
edge_attrs &lt;- c("arrowhead = dot")

# ...and the graph itself
graph_attrs &lt;- c("layout = circo",
                 "overlap = false",
                 "fixedsize = true",
                 "ranksep = 3",
                 "outputorder = edgesfirst")

# Generate the graph diagram in the RStudio Viewer.
# The green lines show flights that weren't late (red indicates late arrivals)
# This graph is for a single day of flights, airports that are unconnected on a
# given day may be destinations on another day
graphviz_graph(nodes_df = nodes_df, edges_df = edges_df,
               graph_attrs = graph_attrs, node_attrs = node_attrs,
               edge_attrs = edge_attrs, directed = TRUE) %>>%
                 graphviz_render(width = 1200, height = 800)</code></pre>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3" role="complementary">
                <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm">
                    <ul class="nav bs-docs-sidenav">
                        <li>
                            <a href="#graphviz">Graphviz</a>
                            <ul class="nav">
                                <li><a href="#diagrammer-implementation">DiagrammeR Implementation</a></li>
                                <li><a href="#defining-a-graphviz-graph">Defining a Graphviz Graph</a></li>
                                <li><a href="#statements">Statements</a></li>
                                <li><a href="#subgraphs-and-clusters">Subgraphs and Clusters</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#attributes">Attributes</a>
                            <ul class="nav">
                                <li><a href="#colors">Colors</a></li>
                                <li><a href="#node-shapes">Node Shapes</a></li>
                                <li><a href="#arrow-shapes">Arrow Shapes</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#substitution">Substitution</a>
                            <ul class="nav">
                                <li><a href="#how-it-works">How It Works</a></li>
                                <li><a href="#examples">Examples</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#rendering-engines">Rendering Engines</a>
                            <ul class="nav">
                                <li><a href="#the-engines">The Engines</a></li>
                                <li><a href="#dot">dot</a></li>
                                <li><a href="#neato">neato</a></li>
                                <li><a href="#twopi">twopi</a></li>
                                <li><a href="#circo">circo</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#functions-for-building-graphs">Functions for Building Graphs</a>
                            <ul class="nav">
                                <li><a href="#create-graph-render">Create Graph, Render</a></li>
                                <li><a href="#function-examples">Examples</a></li>
                                <li><a href="#numeric-color-scales">Scaling Node and Edge Attributes</a></li>
                                <li><a href="#exporting-graph-code">Exporting Graph Code</a></li>
                                <li><a href="#nycflights13-example">Example with nycflights13</a></li>
                            </ul>
                        </li>
                    </ul>
                    <a class="back-to-top" href="#top">Back to top</a>
                </nav>
            </div>
        </div>

        <footer class="bs-docs-footer" role="contentinfo">
            <div class="container">
                <div class="bs-docs-social">
                    <ul class="bs-docs-social-buttons">
                        <li>
                            <iframe class="github-btn" src="http://ghbtns.com/github-btn.html?user=rich-iannone&amp;repo=DiagrammeR&amp;type=watch&amp;count=true" width="90" height="20" title="Star on GitHub"></iframe>
                        </li>
                        <li>
                            <iframe class="github-btn" src="http://ghbtns.com/github-btn.html?user=rich-iannone&amp;repo=DiagrammeR&amp;type=fork&amp;count=true" width="90" height="20" title="Fork on GitHub"></iframe>
                        </li>
                    </ul>
                    <ul class="bs-docs-social-buttons">
                        <li class="follow-btn">
                            <a href="https://twitter.com/riannone" class="twitter-follow-button" data-link-color="#0069D6" data-show-count="true">Follow @riannone</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="container">
                <p>Designed and built by Richard Iannone <a href="https://twitter.com/riannone" target="_blank">@riannone</a>.</p>
                <p>Valuable contributions by Kent Russell <a href="https://twitter.com/timelyportfolio" target="_blank">@timelyportfolio</a>, JJ Allaire <a href="https://twitter.com/rstudio" target="_blank">@rstudio</a>, and Michaël Benesty <a href="https://twitter.com/pommedeterre33" target="_blank">@pommedeterre33</a>.</p>
                <p>Code licensed under MIT.</p>
                <ul class="bs-docs-footer-links text-muted">
                    <li>Currently v0.5</li>
                    <li>&middot;</li>
                    <li><a href="https://github.com/rich-iannone/DiagrammeR">GitHub</a></li>
                    <li>&middot;</li>
                    <li><a href="https://github.com/rich-iannone/DiagrammeR/issues">Issues</a></li>
                    <li>&middot;</li>
                    <li><a href="https://github.com/rich-iannone/DiagrammeR/releases">Releases</a></li>
                </ul>
            </div>
        </footer>


        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script src="./js/bootstrap.min.js"></script>
        <script src="./js/docs.min.js"></script>
        <script src="./js/ie10-viewport-bug-workaround.js"></script>
        <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>

        <script>
          window.twttr = (function (d,s,id) {
            var t, js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return; js=d.createElement(s); js.id=id; js.async=1;
            js.src="https://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
            return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
          }(document, "script", "twitter-wjs"));
        </script>

    </body>
</html>
