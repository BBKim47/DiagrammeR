<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="DiagrammeR, an R package that allows you to create flowcharts, diagrams, and graphs with Markdown-like text.">
        <meta name="keywords" content="R, JavaScript, graphviz, mermaid">
        <meta name="author" content="Richard Iannone and DiagrammeR contributors">

        <title>
        DiagrammeR - Documentation
        </title>

        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/docs.min.css" rel="stylesheet">

        <script src="js/ie-emulation-modes-warning.js"></script>

        <link rel="apple-touch-icon" href="/apple-touch-icon.png">
        <link rel="icon" href="/favicon.ico">
    </head>

<body>
    <a id="skippy" class="sr-only sr-only-focusable" href="#content"><div class="container"><span class="skiplink-text">Skip to main content</span></div></a>

    <!-- Docs master nav -->
    <header class="navbar navbar-static-top bs-docs-nav" id="top" role="banner">
        <div class="container">
            <div class="navbar-header">
                <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="index.html" class="navbar-brand">DiagrammeR</a>
            </div>
            <nav class="collapse navbar-collapse bs-navbar-collapse">
                <ul class="nav navbar-nav">
                    <li>
                      <a href="docs.html">Getting started</a>
                    </li>
                    <li>
                      <a href="io.html">I/O</a>
                    </li>
                    <li>
                      <a href="graphviz.html">Graphviz</a>
                    </li>
                    <li>
                      <a href="mermaid.html">Mermaid</a>
                    </li>
                    <li class="active">
                      <a href="graphs.html">Building Graphs</a>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="http://github.com/rich-iannone/DiagrammeR">GitHub</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Docs page layout -->
    <div class="bs-docs-header" id="content">
        <div class="container">
        <h1>DiagrammeR Docs</h1>
        <p>Get an overview of DiagrammeR, learn the syntax, check out some examples.</p>
        </div>
    </div>
    <div class="container bs-docs-container">
        <div class="row">
            <div class="col-md-9" role="main">
                <div class="bs-docs-section">
                    <h1 id="building-graphs" class="page-header">Building Graphs</h1>
                    <p class="lead"><strong>DiagrammeR</strong> has a nice set of functions for building graphs. You can continually build the graph object, modify its attributes, get information from it, and render a graph diagram. </p>
                    <h2 id="the-graph-object">The Graph Object</h2>
                    <p>The <strong>DiagrammeR</strong> graph object, created by using the function <code>graphviz_graph</code>, holds information on a graph's nodes, edges, default attributes, and rendering code. Creating a graph object can be as simple as using <code>graphviz_graph()</code>, however, that will be an empty graph and you'll want to populate it.</p>
                    <p>The <strong>DiagrammeR</strong> graph object holds buckets of data that reflect the current state of the graph. The graph can be inspected, nodes and edges can be added, edited, or removed, and, a visualization of the graph or export of its data can be made at any point. The different facets of what make up the graph object can be visualized as follows.</p>
                    <div>
                        <img src="img/graph_object.png" class="img-responsive center-block">
                    </div>
                    <p>Essentially, the elements that make up a graph are tightly coupled inside the graph object. The myriad functions developed for working with the graph object:</p>
                    <ul>
                        <li>preserve the integrity of the data</li>
                        <li>allow for graph migrations from state to state</li>
                        <li>provide an easy-to-use interface for working with graph data</li>
                    </ul>
                </div>
                <div class="bs-docs-section">
                    <h1 id="graph-workflow" class="page-header">Graph Workflow</h1>
                    <p class="lead">If you're planning on creating graph diagrams and also making use of external datasets, you can make use a set of <strong>DiagrammeR</strong> functions that work well with and as data frames.</p>
                    <h2 id="create-graph-render">Create Graph, Render</h2>
                    <p>With the <code>graphviz_graph</code> function, it's possible to generate a graph diagram object without interacting directly with <strong>DOT</strong> code. The function has the following options:</p>
<div>
<pre><code>graphviz_graph(
    nodes_df,     # provide the name of the data frame with node info         
    edges_df,     # provide the name of the data frame with edge info 
    graph_attrs,  # provide a vector of 'graph' attributes
    node_attrs,   # provide a vector of 'node' attributes as defaults
    edge_attrs,   # provide a vector of 'edge' attributes as defaults
    directed      # is the graph to be directed or undirected? Choose TRUE or FALSE
    )
</code></pre>
                    </div>
                    <p>The <code>graphviz_graph</code> function returns a <code>gv_graph</code> object, which can be used by additional processing functions. One such function is the <code>graphviz_render</code> function, which allows for both visualizing the graph object and creating output files:</p>
                    <div>
<pre><code>graphviz_render(
    graph,        # a 'gv_graph' object, created using the 'graphviz_graph' function
    output,       # a string specifying the output type; 'graph' (the default) renders
                  # the graph, 'DOT' outputs DOT code for the graph, and 'SVG' provides
                  # SVG code for the rendered graph
    width,        # optionally set a width in pixels
    height        # optionally set a height in pixels
    )
</code></pre>
                    </div>
                    <p>With packages such as <strong>magrittr</strong> or <strong>pipeR</strong>, one can conveniently pipe output from <code>graphviz_graph</code> to <code>graphviz_render</code>. On the topic of packages, it is important to load the <strong>V8</strong> package as it will enable color scaling functionality (as will be seen in later examples).</p>
                    <p>Before we get to using the <code>graphviz_graph</code> and <code>graphviz_render</code> functions, however, we'll need to create some specialized data frames. One is for nodes, the other concerns the edges. Both types of data frames are parsed by the <code>graphviz_graph</code> function and those column names that match attributes for either nodes (in the node data frame) or edges (in the edge data frame) will be used to provide attribute values on a per-node or per-edge basis. Columns with names that don't match are disregarded, so, there's no harm in having pre-existing or added columns with useful data for analysis.</p>
                    <p>Which columns might a node data frame have? Well, it's important to have at least one column named either <code>node</code>, <code>nodes</code>, or <code>node_id</code>. That's where unique values for the node ID should reside. Here are some notable node attributes:</p>
                        <ul>
                            <li><code>color</code> &mdash; provide an <strong>X11</strong> or hexadecimal color (append 2 digits to hex for alpha)</li>
                            <li><code>distortion</code> &mdash; the node distortion for any <code>shape = polygon</code></li>
                            <li><code>fillcolor</code> &mdash; provide an <strong>X11</strong> or hexadecimal color (append 2 digits to hex for alpha)</li>
                            <li><code>fixedsize</code> &mdash; <code>true</code> or <code>false</code></li>
                            <li><code>fontcolor</code> &mdash; provide an <strong>X11</strong> or hexadecimal color (append 2 digits to hex for alpha)</li>
                            <li><code>fontname</code> &mdash; the name of the font</li>
                            <li><code>fontsize</code> &mdash; the size of the font for the node label</li>
                            <li><code>height</code> &mdash; the height of the node</li>
                            <li><code>label</code> &mdash; the node label text that replaces the default text (which is the node ID)</li>
                            <li><code>penwidth</code> &mdash; the thickness of the stroke for the shape</li>
                            <li><code>peripheries</code> &mdash; the number of peripheries (essentially, additional shape outlines)</li>
                            <li><code>shape</code> &mdash; the node shape (e.g., <code>ellipse</code>, <code>polygon</code>, <code>circle</code>, etc.)</li>
                            <li><code>sides</code> &mdash; if <code>shape = polygon</code>, the number of sides can be provided here</li>
                            <li><code>style</code> &mdash; usually given the value filled if you'd like to fill a node with a color</li>
                            <li><code>tooltip</code> &mdash; provide text here for an unstyled browser tooltip</li>
                            <li><code>width</code> &mdash; the width of the node</li>
                            <li><code>x</code> &mdash; the x position of the node (requires graph attr <code>layout = neato</code> to use)</li>
                            <li><code>y</code> &mdash; the y position of the node (requires graph attr <code>layout = neato</code> to use)</li>
                        </ul>
                    <p>You don't need to use <code>data.frame</code> to make a node data frame: you can use the provided <code>create_nodes</code> function. It's similar in principle to the base <strong>R</strong> <code>data.frame</code> function except that it adds in the following conveniences for graph diagram work:</p>
                        <ul>
                            <li>single values are repeated for n number of nodes supplied</li>
                            <li>selective setting of attributes (e.g., giving attr values for 3 of 10 nodes, allowing non-set nodes to use defaults or globally set attr values)</li>
                            <li>supplying overlong vectors for attributes will result in trimming down to the number of nodes</li>
                            <li>setting <code>label = FALSE</code> will conveniently result in a non-labeled node</li>
                        </ul>
                    <h2 id="function-examples">Examples</h2>
                    <p>Here's an example of how to create a node data frame:</p>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">type_1_nodes &lt;-
  create_nodes(nodes = c("a", "b", "c", "d"),
               label = "type 1",
               style = "filled",
               color = "aqua",
               shape = c("circle", "circle",
                         "triangle", "triangle"))
</code></pre>
                        </div>
                    </div>
                    <p>The <code>type_1_nodes</code> object is indeed a data frame, and, this is good since it's familar and easy to work with. Note that singly supplied attribute values are repeated throughout:</p>
                    <div>
<pre><code> nodes  label  style color    shape
1    a type 1 filled  aqua   circle
2    b type 1 filled  aqua   circle
3    c type 1 filled  aqua triangle
4    d type 1 filled  aqua triangle
</code></pre>
                    </div>
                    <p>Let's make another node data frame:</p>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">type_2_nodes &lt;-
  create_nodes(nodes = c("e", "f", "g", "h"),
               label = "type 2",
               style = "filled",
               color = "lightblue",
               peripheries = c(2, 2))
</code></pre>
                        </div>
                    </div>
                    <p>Here is the resulting data frame (notice that values for the <code>peripheries</code> node attribute are only provided twice):</p>
                    <div>
<pre><code> nodes  label  style     color peripheries
1    e type 2 filled lightblue           2
2    f type 2 filled lightblue           2
3    g type 2 filled lightblue
4    h type 2 filled lightblue
</code></pre>
                    </div>                    
                    <p>Now that we have these groups of nodes in <code>type_1_nodes</code> and <code>type_2_nodes</code>, there may be occasion to combine them into a single node data frame. This can be done with the <code>combine_nodes</code> function (which works much like <code>rbind</code> except that it accepts data frames with columns differing in number, names, and ordering).</p>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">all_nodes &lt;- combine_nodes(type_1_nodes, type_2_nodes)</code></pre>
                        </div>
                    </div>
                    <p>This is the combined node data frame:</p>
                    <div>
<pre><code> nodes  label  style     color    shape peripheries
1    a type 1 filled      aqua   circle
2    b type 1 filled      aqua   circle
3    c type 1 filled      aqua triangle
4    d type 1 filled      aqua triangle
5    e type 2 filled lightblue                    2
6    f type 2 filled lightblue                    2
7    g type 2 filled lightblue
8    h type 2 filled lightblue
</code></pre>
                    </div>
                    <p>Let's look at the nodes that were created. Use the <code>graphviz_graph</code> (just provide the <code>all_nodes</code> object at this point) and pipe to <code>graphviz_render</code>. The <strong>pipeR</strong> package (used in these examples) provides a forward pipe with the <code>%>>%</code> operator. With <strong>magrittr</strong>, use <code>%>%</code> instead. So, this is what the diagram looks like at this point:</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-1-1.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">library("pipeR")

graphviz_graph(nodes_df = all_nodes) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <p>Want to extract a vector list of node IDs? You can use the <code>get_nodes</code> function. It can accept multiple node data frames, edge data frames, or graph objects.</p>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">get_nodes(all_nodes)</code></pre>
                        </div>
                    </div>
                    <div>
<pre><code>[1] "a" "b" "c" "d" "e" "f" "g" "h"</code></pre>
                    </div>
                    <p>Let's make some edges now. For the edge data frame, there are two columns that need to be present: one for the outgoing node edge, and, another for the incoming node edge. These can be called either <code>edge_from</code>, <code>from</code>, <code>edge_to</code>, or <code>to</code>. Each of the two columns should contain node IDs and, ideally, they should match those provided in the node data frame that will be supplied to the <code>graphviz_graph</code> function.</p>
                    <p>As in the nodes data frame, attributes can be provided. Here are some examples of edge attributes that can be used:</p>
                        <ul>
                            <li><code>arrowhead</code> &mdash; the arrow style at the head end (e.g, <code>normal</code>, <code>dot</code>)</li>
                            <li><code>arrowsize</code> &mdash; the scaling factor for the arrowhead and arrowtail</li>
                            <li><code>arrowtail</code> &mdash; the arrow style at the tail end (e.g, <code>normal</code>, <code>dot</code>)</li>
                            <li><code>color</code> &mdash; the stroke color; an <strong>X11</strong> color or a hex code (add 2 digits for alpha)</li>
                            <li><code>dir</code> &mdash; the direction; either <code>forward</code>, <code>back</code>, <code>both</code>, or <code>none</code></li>
                            <li><code>fontcolor</code> &mdash; choose an <strong>X11</strong> color or provide a hex code (append 2 digits for alpha)</li>
                            <li><code>fontname</code> &mdash; the name of the font</li>
                            <li><code>fontsize</code> &mdash; the size of the font for the node label</li>
                            <li><code>headport</code> &mdash; a cardinal direction for where the arrowhead meets the node</li>
                            <li><code>label</code> &mdash; label text for the line between nodes</li>
                            <li><code>minlen</code> &mdash; minimum rank distance between head and tail</li>
                            <li><code>penwidth</code> &mdash; the thickness of the stroke for the arrow</li>
                            <li><code>tailport</code> &mdash; a cardinal direction for where the tail is emitted from the node</li>
                            <li><code>tooltip</code> &mdash; provide text here for an edge tooltip</li>
                        </ul>
                    <p>Let's create some edges between nodes using the create_edges function:</p>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">type_1_edges &lt;-
  create_edges(edge_from = c("a", "a", "b", "c"),
               edge_to = c("b", "d", "d", "a"))

type_2_edges &lt;-
  create_edges(edge_from = c("e", "g", "h", "h"),
               edge_to = c("g", "h", "f", "e"),
               arrowhead = "dot",
               color = "red")</code></pre>
                        </div>
                    </div>                  
                    <p>Two edge data frames were just created. If you'd like to include all those edges in your graph, just use the <code>combine_edges</code> function:</p>
                    <div>
<pre><code>all_edges &lt;- combine_edges(type_1_edges, type_2_edges)</code></pre>
                    </div>
                    <p>Now we have node and edge data frames that can be combined. The next step is to incorporate those edges into the <code>graphviz_graph</code> function and then render the graph.</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-1-2.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">graphviz_graph(nodes_df = all_nodes,
               edges_df = all_edges) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <p>Not bad for an example graph. There may be cases where node or edge attributes should apply to all nodes and edges in the graph. In such cases, there's no need to create columns for those attributes where attribute values are repeated in all rows. Instead, supply vectors of attribute statements for the <code>node_attrs</code> or <code>edge_attrs</code> arguments in the <code>graphviz_graph</code> function. For example, you may want to use <code>Helvetica</code> as the label font. If so, use this in <code>graphviz_graph</code>:</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-1-3.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">graphviz_graph(nodes_df = all_nodes,
               edges_df = all_edges,
               node_attrs = "fontname = Helvetica") %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <p>Likewise, for edges, you may want a certain uniform look that is different from the defaults. Perhaps, a grey line which has a thicker line stroke.</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-1-4.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">graphviz_graph(nodes_df = all_nodes,
               edges_df = all_edges,
               node_attrs = "fontname = Helvetica",
               edge_attrs = c("color = gray", "penwidth = 4")) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <p>The graph attributes can be set in a similar manner by supplying a vector to the <code>graph_attrs</code> argument. In the next rendering, the layout engine is set to <code>circo</code>, node overlapping is suppressed, the separation between nodes is of factor <code>3</code>, and the edges are drawn first (so as to not obscure the nodes).</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-1-5.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">graphviz_graph(nodes_df = all_nodes,
               edges_df = all_edges,
               node_attrs = "fontname = Helvetica",
               edge_attrs = c("color = gray", "penwidth = 4"),
               graph_attrs = c("layout = circo",
                               "overlap = false",
                               "ranksep = 3",
                               "outputorder = edgesfirst")) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <h1 id="numeric-color-scales" class="page-header">Scaling Node and Edge Attributes</h1>
                    <p>With the <code>scale_nodes</code> and <code>scale_edges</code> functions, it's possible to create and apply scaled node and edge attributes. These attributes can be either of the numeric or color variety. Ideally, the numerical data from which the scaled values are generated should reside in the node or edge data frames. This is recommended because the values need to be of the same length and order as the records in the node or edge data frame.</p>
                    <p>For nodes, scales can be made for the following attributes:</p>
                        <ul>
                            <li><code>fontsize</code> <em>numeric</em></em></li>
                            <li><code>labelfontsize</code> <em>numeric</em></li>
                            <li><code>penwidth</code> <em>numeric</em></li>
                            <li><code>height</code> <em>numeric</em></li>
                            <li><code>weight</code> <em>numeric</em></li>
                            <li><code>x</code> <em>numeric</em></li>
                            <li><code>y</code> <em>numeric</em></li>
                            <li><code>color</code> <em>color</em></li>
                            <li><code>fillcolor</code> <em>color</em></li>
                            <li><code>fontcolor</code> <em>color</em></li>
                        </ul>
                    <p>For edges, scales can be made for the following edge attributes:</p>
                        <ul>
                            <li><code>fontsize</code> <em>numeric</em></li>
                            <li><code>labelfontsize</code> <em>numeric</em></li>
                            <li><code>labelangle</code> <em>numeric</em></li>
                            <li><code>labeldistance</code> <em>numeric</em></li>
                            <li><code>penwidth</code> <em>numeric</em></li>
                            <li><code>arrowsize</code> <em>numeric</em></li>
                            <li><code>minlen</code> <em>numeric</em></li>
                            <li><code>weight</code> <em>numeric</em></li>
                            <li><code>color</code> <em>color</em></li>
                            <li><code>fontcolor</code> <em>color</em></li>
                            <li><code>labelfontcolor</code> <em>color</em></li>
                        </ul>
                    <p>There is also another attribute for both nodes and edges called <code>alpha</code> which is a numeric value from <code>0</code>-<code>100</code> that modifies the opacity of a specified color attribute. A value of <code>0</code> is essentially invisible (i.e., completely transparent) whereas <code>100</code> is entirely opaque (i.e., no transparency applied). Creating an alpha scale can be done by either referencing a column containing color attribute values, or, by initializing a color attribute column and then creating an alpha scale at the same time. An example will be useful here, alongside <strong>RStudio</strong> <strong>Viewer</strong> output. Begin by randomly creating edges and nodes with static attributes:</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-2-1.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint"># Set a seed to make the example reproducible
set.seed(23)

# Create an edge data frame and also include a column of 'random' data
many_edges &lt;-
  create_edges(edge_from = sample(seq(1:100), 100, replace = TRUE),
               edge_to = sample(seq(1:100), 100, replace = TRUE),
               random_data = sample(seq(1:5000), 100, replace = TRUE))

# Create the node data frame, using the nodes that are available in
# the 'many_edges' data frame; provide 'shape' and 'fillcolor' attributes
many_nodes &lt;-
  create_nodes(node = get_nodes(many_edges),
               random_data = sample(seq(1:5000),
                                    length(get_nodes(many_edges))),
               label = FALSE,
               shape = "circle",
               fillcolor = "red")

# View the graph and also ensure that style = filled is present
# to activate the fillcolor node attribute
graphviz_graph(nodes_df = many_nodes, edges_df = many_edges,
               node_attrs = "style = filled",
               graph_attrs = c("layout = twopi", 
                               "overlap = false")) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <p>Create a scale for the node attribute <code>penwidth</code> (which changes the stroke thickness of the node shape). Using the data in <code>random_data</code>, those values will be scaled linearly from <code>2</code> to <code>10</code>.</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-2-2.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">many_nodes &lt;- scale_nodes(nodes_df = many_nodes,
                             to_scale = many_nodes$random_data,
                             node_attr = "penwidth",
                             range = c(2, 10))

graphviz_graph(nodes_df = many_nodes, edges_df = many_edges,
               node_attrs = "style = filled",
               graph_attrs = c("layout = twopi", 
                               "overlap = false")) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <p>To apply transparency to color values, use the <code>alpha</code> node attribute but reference the <code>color</code> attribute that should be modified with the syntax: 'alpha:[color_attr]'. If the referenced color attribute doesn't exist, use the following syntax: 'alpha:[color_attr]=[color]'. The color value can either be an <strong>X11</strong> color name or a hexadecimal color value.</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-2-3.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">many_nodes &lt;- scale_nodes(nodes_df = many_nodes,
                          to_scale = many_nodes$random_data,
                          node_attr = "alpha:fillcolor",
                          range = c(5, 90))

graphviz_graph(nodes_df = many_nodes, edges_df = many_edges,
               node_attrs = "style = filled",
               graph_attrs = c("layout = twopi", 
                               "overlap = false")) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <p>Edges can have scales applied to edge attributes:</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-2-4.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">many_edges &lt;- scale_edges(edges_df = many_edges,
                             to_scale = many_edges$random_data,
                             edge_attr = "penwidth",
                             range = c(0.5, 10))

graphviz_graph(nodes_df = many_nodes, edges_df = many_edges,
               node_attrs = "style = filled",
               graph_attrs = c("layout = twopi", 
                               "overlap = false")) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <p>You can linearly scale color values as well. When creating color scales, ensure that the <strong>V8</strong> library is installed and loaded.</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-2-5.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint"># install.packages("V8")
library("V8")
                    
many_edges &lt;- scale_edges(edges_df = many_edges,
                             to_scale = many_edges$penwidth,
                             edge_attr = "color",
                             range = c("red", "green"))

graphviz_graph(nodes_df = many_nodes, edges_df = many_edges,
               node_attrs = "style = filled",
               graph_attrs = c("layout = twopi", 
                               "overlap = false")) %>>% graphviz_render</code></pre>
                        </div>
                    </div>
                    <h1 id="exporting-graph-code" class="page-header">Exporting Graph Code</h1>
                    <p>If you'd like to return the <strong>Graphviz</strong> <strong>DOT</strong> code (to, perhaps, share it or use it directly with the <strong>Graphviz</strong> command-line utility), just use <code>output = "DOT"</code> in the <code>graphviz_render</code> function. Here's a simple example:</p>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint">graphviz_graph(nodes_df = data.frame(nodes = c("a", "b", "c")),
               edges_df = data.frame(edge_from = c("a", "b", "c"),
               edge_to = c("b", "c", "b")),
               graph_attrs = c("layout = dot", "rankdir = LR"),
               node_attrs = "fontname = Helvetica",
               edge_attrs = "arrowhead = dot") %>>%
                 graphviz_render(output = "DOT") %>>% cat</code></pre>
                        </div>
                    </div>
                    <p>The output is pretty clean <strong>DOT</strong> code:</p>
<div>
<pre><code>digraph {

  graph [layout = dot,
         rankdir = LR]

  node [fontname = Helvetica]

  edge [arrowhead = dot]

  'a'
  'b'
  'c'
  'a'->'b' 
  'b'->'c' 
  'c'->'b' 
}</code></pre>
</div>
                    <p>What about <strong>SVG</strong>s? Those are the things you should eat for breakfast, every day. Well, you can get those out as well. It's all part of maintaining a balanced diet:</p>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint"># install.packages("V8")
library("V8")

graphviz_graph(nodes_df = create_nodes(nodes = c("a", "b", "c")),
               edges_df = create_edges(edge_from = c("a", "b", "c"),
                                       edge_to = c("b", "c", "b")),
               graph_attrs = c("layout = dot", "rankdir = LR"),
               node_attrs = "fontname = Helvetica",
               edge_attrs = "arrowhead = dot") %>>%
                 graphviz_render(output = "SVG") %>>% cat</code></pre>
                        </div>
                    </div>
                    <h1 id="nycflights13-example" class="page-header">Example with nycflights13</h1>
                    <p>Now, yet another example. This time with an external dataset. Let's use the <strong>nycflights13</strong> package to prepare some data frames and then create a graph diagram.</p>
                    <div class="bs-example">
                        <img src="img/grviz_example-3-1.png" class="img-responsive center-block">
                    </div>
                    <div class="highlight">
                        <div>
                            <pre><code class="prettyprint"># Get the 'nycflights13' package if not already installed
# install.packages('nycflights13')

# Get the 'lubridate' package if not already installed
# install.packages('lubridate')

# Get the latest build of the 'DiagrammeR' package from GitHub
devtools::install_github('rich-iannone/DiagrammeR')

library("nycflights13")
library("lubridate")
library("DiagrammeR")

# Choose a day from 2013 for NYC flight data
# (You can choose any Julian day, it's interesting to see results for different days)
day_of_year &lt;- 10 

# Get a data frame of complete cases (e.g., flights have departure and arrival times)
nycflights13 &lt;-
  nycflights13::flights[which(complete.cases(nycflights13::flights) == TRUE), ]

# Generate a POSIXct vector of dates using the 'ISOdatetime' function
# Columns 1, 2, and 3 are year, month, and day columns
# Column 4 is a 4-digit combination of hours (00-23) and minutes (00-59)
date_time &lt;-
  data.frame("date_time" =
               ISOdatetime(year = nycflights13[,1],
                           month = nycflights13[,2],
                           day = nycflights13[,3],
                           hour = gsub("[0-9][0-9]$", "", nycflights13[,4]),
                           min = gsub(".*([0-9][0-9])$", "\\1", nycflights13[,4]),
                           sec = 0, tz = "GMT"))

# Add the POSIXct vector 'date_time' to the 'nycflights13' data frame
nycflights13 &lt;- cbind(date_time, nycflights13)

# Select flights only from the specified day of the year 2013
nycflights13_day &lt;-
  subset(nycflights13,
         date_time >= ymd('2013-01-01', tz = "GMT") + days(day_of_year - 1) &
           date_time &lt; ymd('2013-01-01', tz = "GMT") + days(day_of_year))

# Create the 'nodes' data frame where at least one column is named "nodes" or "node_id"
# Column 12 is the 3-letter code for the airport departing from
# Column 13 is for the airport arriving to
# (Option: change df to 'nycflights13_day' and only airports used for the day will be included)
nodes_df &lt;- create_nodes(nodes = unique(c(nycflights13[,12],
                                    nycflights13[,13])),
                         label = FALSE)

# The 'edges' data frame must have columns named 'edge_from' and 'edge_to'
# The color attribute is determined with an 'ifelse' statement, where
# column 8 is the minutes early (negative values) or minutes late (positive values)
# for the flight arrival
edges_df &lt;- create_edges(edge_from = nycflights13_day[,12],
                         edge_to = nycflights13_day[,13],
                         color = ifelse(nycflights13_day[,8] &lt; 0,
                                    "green", "red"))

# Set the graph diagram's default attributes for...

# ...nodes
node_attrs &lt;- c("style = filled", "fillcolor = lightblue",
                "color = gray", "shape = circle", "fontname = Helvetica",
                "width = 1")

# ...edges
edge_attrs &lt;- c("arrowhead = dot")

# ...and the graph itself
graph_attrs &lt;- c("layout = circo",
                 "overlap = false",
                 "fixedsize = true",
                 "ranksep = 3",
                 "outputorder = edgesfirst")

# Generate the graph diagram in the RStudio Viewer.
# The green lines show flights that weren't late (red indicates late arrivals)
# This graph is for a single day of flights, airports that are unconnected on a
# given day may be destinations on another day
graphviz_graph(nodes_df = nodes_df, edges_df = edges_df,
               graph_attrs = graph_attrs, node_attrs = node_attrs,
               edge_attrs = edge_attrs, directed = TRUE) %>>%
                 graphviz_render(width = 1200, height = 800)</code></pre>
                        </div>
                    </div>
                    <div class="bs-docs-section">
                    <h1 id="graph-function-reference" class="page-header">Graph Function Reference</h1>
                    <p class="lead">While the <strong>DiagrammeR</strong> graph functions are surely nice, there are a lot of them. This section breaks down the functions by use, providing examples along the way. This will keep you continually building those graph objects.</p>
                    <h2 id="building-node-edge-df">Building Node and Edge DFs</h2>
                    <p>It's sometimes helpful to collect data into specialized data frames before submitting the node/edges/attributes to a graph object. Here are some functions to make that sort of thing possible.</p>
                        <div>
                            <img src="img/graph-functions/create_nodes_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/create_edges_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/scale_nodes_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/scale_edges_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/combine_nodes_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/combine_edges_2x.png" class="img-responsive center-block">
                        </div>
                    <h2 id="graph-and-render">Graph and Render</h2>
                    <p>Eventually, you'll want to make a graph and then see that graph. Two functions make that possible.</p>
                        <div>
                            <img src="img/graph-functions/graphviz_graph_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/graphviz_render_2x.png" class="img-responsive center-block">
                        </div>
                    <h2 id="inspecting-the-graph">Inspecting the Graph</h2>
                    <p>Knowing what's in the graph is important. Like, "how many predecessors did that node have, again?" Well, now it's easy to find out.</p>
                        <div>
                            <img src="img/graph-functions/is_graph_empty_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/node_info_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/edge_info_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/node_present_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/edge_present_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/get_nodes_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/get_edges_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/get_predecessors_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/get_successors_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/node_count_2x.png" class="img-responsive center-block">
                        </div>
                    <h2 id="modifying-the-graph">Modifying the Graph</h2>
                    <p>Add nodes, delete edges, modify relationships between nodes, set node type declarations... Those are some of the things you can do with these graph construction/destruction functions.</p>
                        <div>
                            <img src="img/graph-functions/add_node_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/add_edges_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/delete_node_2x.png" class="img-responsive center-block">
                        </div>
                        <div>
                            <img src="img/graph-functions/delete_edge_2x.png" class="img-responsive center-block">
                        </div>
                         <div>
                            <img src="img/graph-functions/node_type_2x.png" class="img-responsive center-block">
                        </div>
                         <div>
                            <img src="img/graph-functions/edge_relationship_2x.png" class="img-responsive center-block">
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3" role="complementary">
                <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm">
                    <ul class="nav bs-docs-sidenav">
                        <li>
                            <a href="#building-graphs">Building Graphs</a>
                            <ul class="nav">
                                <li><a href="#the-graph-object">The Graph Object</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#graphs-workflow">Graph Workflow</a>
                            <ul class="nav">
                                <li><a href="#create-graph-render">Create Graph, Render</a></li>
                                <li><a href="#function-examples">Examples</a></li>
                                <li><a href="#numeric-color-scales">Scaling Node and Edge Attributes</a></li>
                                <li><a href="#exporting-graph-code">Exporting Graph Code</a></li>
                                <li><a href="#nycflights13-example">Example with nycflights13</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#graph-function-reference">Graph Function Reference</a>
                            <ul class="nav">
                                <li><a href="#building-node-edge-df">Building Node and Edge DFs</a></li>
                                <li><a href="#graph-and-render">Graph and Render</a></li>
                                <li><a href="#inspecting-the-graph">Inspecting the Graph</a></li>
                                <li><a href="#modifying-the-graph">Modifying the Graph</a></li>
                            </ul>
                        </li>
                    </ul>
                    <a class="back-to-top" href="#top">Back to top</a>
                </nav>
            </div>
        </div>

        <footer class="bs-docs-footer" role="contentinfo">
            <div class="container">
                <div class="bs-docs-social">
                    <ul class="bs-docs-social-buttons">
                        <li>
                            <iframe class="github-btn" src="http://ghbtns.com/github-btn.html?user=rich-iannone&amp;repo=DiagrammeR&amp;type=watch&amp;count=true" width="90" height="20" title="Star on GitHub"></iframe>
                        </li>
                        <li>
                            <iframe class="github-btn" src="http://ghbtns.com/github-btn.html?user=rich-iannone&amp;repo=DiagrammeR&amp;type=fork&amp;count=true" width="90" height="20" title="Fork on GitHub"></iframe>
                        </li>
                    </ul>
                    <ul class="bs-docs-social-buttons">
                        <li class="follow-btn">
                            <a href="https://twitter.com/riannone" class="twitter-follow-button" data-link-color="#0069D6" data-show-count="true">Follow @riannone</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="container">
                <p>Designed and built by Richard Iannone <a href="https://twitter.com/riannone" target="_blank">@riannone</a>.</p>
                <p>Valuable contributions by Kent Russell <a href="https://twitter.com/timelyportfolio" target="_blank">@timelyportfolio</a>, JJ Allaire <a href="https://twitter.com/rstudio" target="_blank">@rstudio</a>, and Michaël Benesty <a href="https://twitter.com/pommedeterre33" target="_blank">@pommedeterre33</a>.</p>
                <p>Code licensed under MIT.</p>
                <ul class="bs-docs-footer-links text-muted">
                    <li>Currently v0.6</li>
                    <li>&middot;</li>
                    <li><a href="https://github.com/rich-iannone/DiagrammeR">GitHub</a></li>
                    <li>&middot;</li>
                    <li><a href="https://github.com/rich-iannone/DiagrammeR/issues">Issues</a></li>
                    <li>&middot;</li>
                    <li><a href="https://github.com/rich-iannone/DiagrammeR/releases">Releases</a></li>
                </ul>
            </div>
        </footer>


        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script src="./js/bootstrap.min.js"></script>
        <script src="./js/docs.min.js"></script>
        <script src="./js/ie10-viewport-bug-workaround.js"></script>
        <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>

        <script>
          window.twttr = (function (d,s,id) {
            var t, js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return; js=d.createElement(s); js.id=id; js.async=1;
            js.src="https://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
            return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
          }(document, "script", "twitter-wjs"));
        </script>

    </body>
</html>
